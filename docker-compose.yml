services:
  dashboard-api:
    build:
      context: .
      dockerfile: Dockerfile.dashboard
    ports:
      - "8001:8001"
    volumes:
      - .:/app
    environment:
      - RUN_HISTORY_PATH=output/run_history.jsonl
      - RUN_LIVE_PATH=output/live_metrics.json

  dashboard-web:
    build:
      context: ./web
    ports:
      - "5173:5173"
    environment:
      - VITE_API_PROXY=http://dashboard-api:8001
    depends_on:
      - dashboard-api
